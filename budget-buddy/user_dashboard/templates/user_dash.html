{% extends "base_generic.html" %}
{% block title %}
User Dashboard
{% endblock title %}

{% block content %}
<div class="card mt-4">
    <div class="row">
        <!-- Account summary -->
        <div class="card col-md-6">
            <h2>Account Overview:</h2>
            <ul class="list-group">
                <li class="list-group-item" style="font-size: 16px;">Salary: {{ user_dashboard.salary }}</li>
                <li class="list-group-item" style="font-size: 16px;">Saving Percentage: {{ user_dashboard.saving_percentage }}</li>
                <li class="list-group-item" style="font-size: 16px;">Fixed Percentage: {{ user_dashboard.fixed_percentage }}</li>
                <li class="list-group-item" style="font-size: 16px;">Spending: {{ user_dashboard.spending }}</li>
                
            </ul>
        </div>
        <!-- Donut chart -->
        <div class="col-md-6">
            <h2>Expense Overview:</h2>
            <canvas id="doughnutChart" width="250" height="250"></canvas>
        </div>
    </div>
<hr>

<div>
    <h2>Your Transactions</h2>
    <table style="border-collapse: separate; border-spacing: 2em;">
        <tr>
            <th>Date of</th>
            <th>Amount</th>
            <th>Category</th>
        </tr>

        <div>
            <a href="{% url 'add_transaction' %}">Add Transaction</a>
            <a href="{% url 'upload_transaction' %}">Import Transactions</a>
        </div>

        {% for t in transactions %}
            <tr>
                <td>{{t.date_of}}</td>
                <td>${{t.amount}}</td>
                <td>{{t.category}}</td>
                <td><a href="{% url 'update_transaction' t.id %}">Edit</a></td>
                <td><a href="{% url 'delete_transaction' t.id %}">Delete</a></td>
            </tr>
        {% endfor %}

    </table>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    // Chart.js Doughnut Chart
    var ctx = document.getElementById('doughnutChart').getContext('2d');
    var myDoughnutChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['Entertainment', 'Shopping', 'Bills', 'Food'],
            datasets: [{
                data: [25, 35, 25, 15],
                backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56']
            }]
        }
    });
</script>

{% endblock content %}
